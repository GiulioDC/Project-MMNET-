function reset(){scannedBarcodes={},scannedBarcodesCount=0,cancelButton.title="Cancel",scanResult.text=" ",scanContentType.text=" ",scanParsed.text=" "}function parseContentType(e){switch(e){case Barcode.URL:return"URL";case Barcode.SMS:return"SMS";case Barcode.TELEPHONE:return"TELEPHONE";case Barcode.TEXT:return"TEXT";case Barcode.CALENDAR:return"CALENDAR";case Barcode.GEOLOCATION:return"GEOLOCATION";case Barcode.EMAIL:return"EMAIL";case Barcode.CONTACT:return"CONTACT";case Barcode.BOOKMARK:return"BOOKMARK";case Barcode.WIFI:return"WIFI";default:return"UNKNOWN"}}function parseResult(e){var t="";switch(e.contentType){case Barcode.URL:t="URL = "+e.result;break;case Barcode.SMS:t="SMS = "+JSON.stringify(e.data);break;case Barcode.TELEPHONE:t="Telephone = "+e.data.phonenumber;break;case Barcode.TEXT:t="Text = "+e.result;break;case Barcode.CALENDAR:t="Calendar = "+JSON.stringify(e.data);break;case Barcode.GEOLOCATION:t="Latitude = "+e.data.latitude+"\nLongitude = "+e.data.longitude;break;case Barcode.EMAIL:t="Email = "+e.data.email+"\nSubject = "+e.data.subject+"\nMessage = "+e.data.message;break;case Barcode.CONTACT:t="Contact = "+JSON.stringify(e.data);break;case Barcode.BOOKMARK:t="Bookmark = "+JSON.stringify(e.data);break;case Barcode.WIFI:return"WIFI = "+JSON.stringify(e.data);default:t="unknown content type"}return t}Titanium.UI.setBackgroundColor("#000");var tabGroup=Titanium.UI.createTabGroup(),win1=Titanium.UI.createWindow({title:"Tab 1",backgroundColor:"#fff"}),tab1=Titanium.UI.createTab({icon:"KS_nav_views.png",title:"Tab 1",window:win1}),label1=Titanium.UI.createLabel({color:"#999",text:"I am Window 1",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center",width:"auto"});win1.add(label1);var win2=Titanium.UI.createWindow({title:"Tab 2",backgroundColor:"#fff"}),tab2=Titanium.UI.createTab({icon:"KS_nav_ui.png",title:"Tab 2",window:win2}),label2=Titanium.UI.createLabel({color:"#999",text:"I am Window 2",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center",width:"auto"});win2.add(label2),tabGroup.addTab(tab1),tabGroup.addTab(tab2),tabGroup.open();var Barcode=require("ti.barcode");Barcode.allowRotation=!0,Barcode.displayedMessage="",Barcode.useLED=!0;var window=Ti.UI.createWindow({backgroundColor:"white"}),scrollView=Ti.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",top:0,showVerticalScrollIndicator:!0,layout:"vertical"}),overlay=Ti.UI.createView({backgroundColor:"transparent",top:0,right:0,bottom:0,left:0}),switchButton=Ti.UI.createButton({title:Barcode.useFrontCamera?"Back Camera":"Front Camera",textAlign:"center",color:"#000",backgroundColor:"#fff",style:0,font:{fontWeight:"bold",fontSize:16},borderColor:"#000",borderRadius:10,borderWidth:1,opacity:.5,width:220,height:30,bottom:10});switchButton.addEventListener("click",function(){Barcode.useFrontCamera=!Barcode.useFrontCamera,switchButton.title=Barcode.useFrontCamera?"Back Camera":"Front Camera"}),overlay.add(switchButton);var toggleLEDButton=Ti.UI.createButton({title:Barcode.useLED?"LED is On":"LED is Off",textAlign:"center",color:"#000",backgroundColor:"#fff",style:0,font:{fontWeight:"bold",fontSize:16},borderColor:"#000",borderRadius:10,borderWidth:1,opacity:.5,width:220,height:30,bottom:40});toggleLEDButton.addEventListener("click",function(){Barcode.useLED=!Barcode.useLED,toggleLEDButton.title=Barcode.useLED?"LED is On":"LED is Off"}),overlay.add(toggleLEDButton);var cancelButton=Ti.UI.createButton({title:"Cancel",textAlign:"center",color:"#000",backgroundColor:"#fff",style:0,font:{fontWeight:"bold",fontSize:16},borderColor:"#000",borderRadius:10,borderWidth:1,opacity:.5,width:220,height:30,top:20});cancelButton.addEventListener("click",function(){Barcode.cancel()}),overlay.add(cancelButton);var scanCode=Ti.UI.createButton({title:"Scan Code",width:200,height:60,top:20});scanCode.addEventListener("click",function(){reset(),Barcode.capture({animate:!0,overlay:overlay,showCancel:!1,showRectangle:!1,keepOpen:!0})}),scrollView.add(scanCode);var scanImage=Ti.UI.createButton({title:"Scan Image from Gallery",width:200,height:60,top:20});scanImage.addEventListener("click",function(){reset(),Ti.Media.openPhotoGallery({success:function(e){Barcode.parse({image:e.media})}})}),scrollView.add(scanImage);var scannedBarcodes={},scannedBarcodesCount=0;Barcode.addEventListener("error",function(e){scanContentType.text=" ",scanParsed.text=" ",scanResult.text=e.message}),Barcode.addEventListener("cancel",function(){Ti.API.info("Cancel received")}),Barcode.addEventListener("success",function(e){Ti.API.info("Success called with barcode: "+e.result),scannedBarcodes[""+e.result]||(scannedBarcodes[e.result]=!0,scannedBarcodesCount+=1,cancelButton.title="Finished ("+scannedBarcodesCount+" Scanned)",scanResult.text+=e.result+" ",scanContentType.text+=parseContentType(e.contentType)+" ",scanParsed.text+=parseResult(e)+" ")}),scrollView.add(Ti.UI.createLabel({text:"You may need to rotate the device",top:10,height:Ti.UI.SIZE||"auto",width:Ti.UI.SIZE||"auto"})),scrollView.add(Ti.UI.createLabel({text:"Result: ",textAlign:"left",top:10,left:10,color:"black",height:Ti.UI.SIZE||"auto"}));var scanResult=Ti.UI.createLabel({text:" ",textAlign:"left",top:10,left:10,color:"black",height:Ti.UI.SIZE||"auto"});scrollView.add(scanResult),scrollView.add(Ti.UI.createLabel({text:"Content Type: ",top:10,left:10,textAlign:"left",color:"black",height:Ti.UI.SIZE||"auto"}));var scanContentType=Ti.UI.createLabel({text:" ",textAlign:"left",top:10,left:10,color:"black",height:Ti.UI.SIZE||"auto"});scrollView.add(scanContentType),scrollView.add(Ti.UI.createLabel({text:"Parsed: ",textAlign:"left",top:10,left:10,color:"black",height:Ti.UI.SIZE||"auto"}));var scanParsed=Ti.UI.createLabel({text:" ",textAlign:"left",top:10,left:10,color:"black",height:Ti.UI.SIZE||"auto"});scrollView.add(scanParsed),window.add(scrollView),window.open();